{% macro user_avatar(user, size='sm', show_name=True) %}
<div class="flex items-center gap-2 group"
    title="{{ user.status_message or user.role|capitalize if user else 'Não atribuído' }}">
    <div class="relative">
        <div
            class="{{ 'w-8 h-8' if size == 'sm' else 'w-10 h-10' }} rounded-full bg-gray-100 flex items-center justify-center text-xs font-bold text-gray-600 overflow-hidden ring-2 ring-white shadow-sm border border-gray-100">
            {% if user and user.profile_image %}
            <img src="{{ url_for('static', filename='uploads/profiles/' + user.profile_image) }}" alt="{{ user.name }}"
                class="w-full h-full object-cover">
            {% elif user %}
            {{ user.name[:2].upper() }}
            {% else %}
            <span class="text-gray-300">?</span>
            {% endif %}
        </div>
        {% if user and user.status_message %}
        <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full"
            title="Status definido"></span>
        {% endif %}
    </div>
    {% if show_name %}
    <div class="flex flex-col">
        <span class="text-sm font-medium {{ 'text-gray-900' if user else 'text-gray-400 italic' }} leading-tight">
            {{ user.name if user else 'Não atribuído' }}
        </span>
        {% if user and user.status_message %}
        <span class="text-[10px] text-gray-400 max-w-[120px] truncate hidden group-hover:block transition-all">{{
            user.status_message }}</span>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endmacro %}
{% macro render_pagination(pagination, endpoint) %}
{% if pagination.pages > 1 %}
<div class="flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6 mt-4 rounded-b-xl">
    <div class="flex justify-between flex-1 sm:hidden">
        {% if pagination.has_prev %}
        <a href="{{ url_for(endpoint, **dict(request.args, page=pagination.prev_num)) }}"
            class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
            Anterior </a>
        {% endif %}
        {% if pagination.has_next %}
        <a href="{{ url_for(endpoint, **dict(request.args, page=pagination.next_num)) }}"
            class="relative ml-3 inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
            Próximo </a>
        {% endif %}
    </div>
    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
        <div>
            <p class="text-sm text-gray-700">
                Mostrando <span class="font-medium">{{ (pagination.page - 1) * pagination.per_page + 1 }}</span> a <span
                    class="font-medium">{{ (pagination.page - 1) * pagination.per_page + pagination.items|length
                    }}</span> de <span class="font-medium">{{ pagination.total }}</span> resultados
            </p>
        </div>
        <div>
            <nav class="relative z-0 inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                {% if pagination.has_prev %}
                <a href="{{ url_for(endpoint, **dict(request.args, page=pagination.prev_num)) }}"
                    class="relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50">
                    <span class="sr-only">Anterior</span>
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </a>
                {% endif %}

                {% for page in pagination.iter_pages() %}
                {% if page %}
                {% if page != pagination.page %}
                <a href="{{ url_for(endpoint, **dict(request.args, page=page)) }}"
                    class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50">
                    {{ page }} </a>
                {% else %}
                <span
                    class="relative inline-flex items-center px-4 py-2 text-sm font-bold text-white bg-northway-red border border-northway-red cursor-default">
                    {{ page }} </span>
                {% endif %}
                {% else %}
                <span
                    class="relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 cursor-default">
                    ... </span>
                {% endif %}
                {% endfor %}

                {% if pagination.has_next %}
                <a href="{{ url_for(endpoint, **dict(request.args, page=pagination.next_num)) }}"
                    class="relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50">
                    <span class="sr-only">Próximo</span>
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </a>
                {% endif %}
            </nav>
        </div>
    </div>
</div>
{% endif %}
{% endmacro %}