{% extends "_settings_layout.html" %}

{% block settings_content %}
<div class="max-w-7xl mx-auto">
    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-6 md:mb-8">Configura√ß√µes</h1>

    <!-- Inspirational Contracts Banner -->
    <div
        class="mb-10 relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-900 to-black p-8 text-white shadow-xl border border-gray-800">
        <div class="relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-8">
            <div class="max-w-2xl">
                <div class="flex items-center gap-2 mb-4">
                    <span
                        class="bg-northway-red/20 text-northway-red text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest border border-northway-red/30">Agilidade
                        & Escala</span>
                </div>
                <h2 class="text-3xl font-black mb-3 leading-tight tracking-tight">Sua preocupa√ß√£o √© somente com o <span
                        class="text-northway-red italic">primeiro contrato</span> üñãÔ∏è</h2>
                <p class="text-base text-gray-400 leading-relaxed">
                    Configure seus modelos uma √∫nica vez e deixe que nossa IA e automa√ß√£o cuidem do preenchimento
                    futuro.
                    Transforme horas de burocracia em segundos de execu√ß√£o.
                </p>
            </div>
            <div class="flex-shrink-0">
                <div
                    class="bg-white/5 backdrop-blur-md p-6 rounded-2xl border border-white/10 flex flex-col items-center text-center">
                    <div
                        class="w-12 h-12 bg-northway-red rounded-xl flex items-center justify-center mb-3 shadow-lg shadow-northway-red/20">
                        <i data-lucide="zap" class="w-6 h-6 text-white"></i>
                    </div>
                    <span class="text-xs font-bold text-gray-300 uppercase tracking-tighter">Pronto para a Escala</span>
                </div>
            </div>
        </div>
        <!-- Abstract BG Decoration -->
        <div class="absolute -right-20 -bottom-20 w-80 h-80 bg-northway-red/10 rounded-full blur-3xl"></div>
        <div class="absolute -left-10 top-0 opacity-5">
            <i data-lucide="file-check" class="w-64 h-64 text-white"></i>
        </div>
    </div>

    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
        <h2 class="text-xl font-bold text-gray-900">Modelos Dispon√≠veis</h2>
        <a href="{{ url_for('templates.new_template') }}"
            class="w-full md:w-auto bg-[#fa0102] text-white px-4 py-2 rounded-lg font-bold hover:bg-red-700 transition-colors shadow-sm flex items-center justify-center gap-2">
            <i data-lucide="plus" class="w-4 h-4"></i> Novo Modelo
        </a>
    </div>

    {% if templates %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
        {% for tmpl in templates %}
        <div
            class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 md:p-6 hover:shadow-md transition-shadow relative group">
            <!-- Badges -->
            <div class="flex justify-between items-start mb-4">
                <span
                    class="px-2 py-1 rounded text-xs font-bold uppercase {{ 'bg-blue-100 text-blue-700' if tmpl.type == 'contract' else 'bg-purple-100 text-purple-700' }}">
                    {{ 'Contrato' if tmpl.type == 'contract' else 'Anexo' }}
                </span>
                {% if tmpl.is_global %}
                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded font-bold flex items-center gap-1">
                    <i data-lucide="globe" class="w-3 h-3"></i> Global
                </span>
                {% elif tmpl.is_library %}
                <span class="bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded font-bold flex items-center gap-1">
                    <i data-lucide="book" class="w-3 h-3"></i> Biblioteca
                </span>
                {% endif %}
            </div>

            <h3 class="text-lg font-bold text-gray-900 mb-2 truncate" title="{{ tmpl.name }}">{{ tmpl.name }}</h3>
            <p class="text-xs text-gray-400 mb-2">Atualizado em {{ tmpl.created_at.strftime('%d/%m/%Y') }}</p>
            <p class="text-[10px] text-gray-400 line-clamp-2 h-8">{{ tmpl.description or "" }}</p>

            <!-- Actions -->
            <div class="mt-4 pt-4 border-t border-gray-100 flex justify-end gap-2">
                <a href="{{ url_for('templates.edit_template', id=tmpl.id) }}"
                    class="text-gray-500 hover:text-northway-red p-2 rounded-lg hover:bg-gray-50 transition-colors"
                    title="Editar">
                    <i data-lucide="edit-3" class="w-4 h-4"></i>
                </a>

                {% if current_user.is_super_admin or (not tmpl.is_global or (tmpl.is_global and tmpl.company_id ==
                current_user.company_id)) %}
                <form action="{{ url_for('templates.delete_template', id=tmpl.id) }}" method="POST"
                    onsubmit="return confirm('Tem certeza que deseja excluir este modelo?');" class="inline">
                    <button type="submit"
                        class="text-gray-500 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition-colors"
                        title="Excluir">
                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center text-gray-400">
        <i data-lucide="file-text" class="w-12 h-12 mx-auto mb-3 opacity-20"></i>
        <p>Nenhum modelo cadastrado.</p>
    </div>
    {% endif %}
</div>
{% endblock %}